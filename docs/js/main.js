const d=document.querySelector(".js-search"),S=document.querySelector(".js-btn-search"),h=document.querySelector(".js-btn-reset"),p=document.querySelector(".js-eliminar-fav"),v=document.querySelector(".js-container-result"),c=document.querySelector(".js-container-selected-fav");let g="https://api.jikan.moe/v4/anime?q=",l=g,o=[],t=[];const L=()=>{t=[],c.innerHTML="",localStorage.setItem("favAnimeServer",JSON.stringify(t))};p.addEventListener("click",L);const j=()=>{d.value="",c.innerHTML="",v.innerHTML=""};h.addEventListener("click",j);const y=()=>{const e=document.querySelectorAll(".js-anime");for(const n of e)n.addEventListener("click",k)},k=e=>{const n=parseInt(e.currentTarget.id);console.log(n);const i=o.find(a=>a.mal_id===n);console.log(i);const s=t.findIndex(a=>a.mal_id===n);s===-1?(t.push(i),e.currentTarget.style.border="7px solid purple",console.log(t),r()):t.splice(s,1),localStorage.setItem("favAnimeServer",JSON.stringify(t))},r=()=>{c.innerHTML="",t.forEach(e=>{c.innerHTML+=`<div class="">
            <img class="js-anime" src="${e.images.jpg.image_url}" alt="Imagen del Anime"/> 
            <p class="anime-title">${e.title}</p>
            <button class="btneliminate js-eliminate-fav" id="${e.mal_id}">X</button>
        </div>`}),localStorage.setItem("favAnimeServer",JSON.stringify(t)),A()},A=()=>{const e=document.querySelectorAll(".js-eliminate-fav");for(const n of e)n.addEventListener("click",E)},E=e=>{const n=parseInt(e.currentTarget.id);t=t.filter(i=>i.mal_id!==n),r(),localStorage.setItem("favAnimeServer",JSON.stringify(t))},I=e=>{e.preventDefault(),console.log("click");const n=d.value.toLowerCase();l=g+n,console.log(l),fetch(l).then(i=>i.json()).then(i=>{o=i.data,console.log(o);let s="";i.data.forEach(a=>{const u=a.images.jpg.image_url,f=a.title;s+=`<img class="js-anime" src="${u}" alt="Imagen del Anime" id="${a.mal_id}"/> <p class="anime-title">${f}</p>`}),v.innerHTML=s,y()})};S.addEventListener("click",I);const m=localStorage.getItem("favAnimeServer");m?(t=JSON.parse(m),r(),console.log("Favoritos cargados")):(fetch(l),console.log("No hay favoritos"));
//# sourceMappingURL=main.js.map
